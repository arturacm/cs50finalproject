{% extends "layout.html" %}

{% block title %}
    Schedule
{% endblock %}

{% block main %}

<script type="text/javascript">
    function update()
    {
        var select = document.getElementById('selected');
        var option = select.options[select.selectedIndex];
        document.getElementById('selected').value = option.text;
        var selectDoctor = document.getElementById('selected-doctor');
        var optionDoctor = selectDoctor.options[selectDoctor.selectedIndex];
        document.getElementById('selected-doctor').value = optionDoctor.text;
    }
    update();
</script>
<h2>{{ message }}</h2>
<form action="/appointment" method="post">
    <div class="form-group">
        <label for="schedule">Select a day</label>
        <input type="date" name="schedule">
    </div>

    <div class="form-group">
        <label for="appt">Choose a time for your meeting:</label>
        <input type="time" id="appt" name="appt" min="00:00" max="23:59" required>
    </div>

    <div class="form-group">
        <label for="specialties">Choose a specialty:</label>
        <select id="specialties" name="specialty" onchange="update()">
            <option disabled selected value="" >Select a specialty</option>
            {% for row in specialty %}
                <option value="{{ row }}" id="selected">{{ row }}</option>
            {% endfor %}
        </select>
    </div>

    {{ selectedSpecialty }}

    <div class="form-group">
        <label for="doctor-name">Choose a doctor:</label>
        <select class="form-control" name="doctor" onchange="update()">
            <option disabled selected value ="">Select a doctor</option>
            {% for row in doctorDb %}
                {% if row.specialty == selectedSpecialty %}
                <option value = "{{ row.id }}" id="selected-doctor">{{ row.name }}</option>
                {% endif %}
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <input type="text" name="log" placeholder="Describe your symptons.">
    </div>

    <button class="btn btn-primary" type="submit">Submit</button>
</form>
{% endblock %}
